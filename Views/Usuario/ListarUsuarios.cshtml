@using Kanban
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{

    string rol = HttpContextAccessor.HttpContext.Session.GetString("Rol");
    string admin = Rol.Administrador.ToString();
}
@{
    ViewData["Title"] = "Usuarios";
}

@if (ViewBag.ErrorMessage != null)
{
        <div class="error-message">
            <p>@ViewBag.ErrorMessage</p>
        </div>
}

@model List<Kanban.ViewModels.ListarUsuariosViewModel> 

<div class="text-center">
    <h1 class="display-4">Listado de usuarios</h1>
</div>
<table class="table table-primary table-striped">
    <thead>
    <tr>
      <th scope="col">Nombre de Usuario</th>
      <th scope="col">Rol</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    @foreach(var usuario in Model)
    {
        <tr>
            <td>@usuario.NombreDeUsuario</td>
            <td>@usuario.RolUsuario</td>
            <td><button type="button" class="btn btn-primary"><a class="nav-link text-light" asp-area="" asp-controller="Tablero" asp-action="ListarTablerosPorUsuario" asp-route-idUsuario="@usuario.Id">Tableros</a></button></td> 
            <td><button type="button" class="btn btn-primary"><a class="nav-link text-light" asp-area="" asp-controller="Usuario" asp-action="CambiarPassword" asp-route-id="@usuario.Id">Cambiar Contrase√±a</a></button></td>
            @if(rol == admin)
            {
            <td><button type="button" class="btn btn-primary"><a class="nav-link text-light" asp-area="" asp-controller="Usuario" asp-action="ModificarUsuario" asp-route-id="@usuario.Id">Modificar</a></button></td>
            <td><button type="button" class="btn btn-danger"><a class="nav-link text-light" asp-area="" asp-controller="Usuario" asp-action="EliminarUsuario" asp-route-id="@usuario.Id">Eliminar</a></button></td>
            }        
        </tr>
    }
  </tbody>
</table>
@if(rol == admin)
{
<div class="text-center">
    <button type="button" class="btn btn-success"><a   class="nav-link text-light" asp-area="" asp-controller="Usuario" asp-action="CrearUsuario">Crear usuario</a></button>
</div>
}